<ion-header>
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-menu-button></ion-menu-button>
    </ion-buttons>
    <ion-title>Account</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content>
  <ion-card class="rounded-3xl">
    <ion-card-header class="ion-justify-content-center">
      <ion-item lines="none">
        <ion-avatar slot="start">
          <img [src]="config.currentUser?.imageUrl ? config.currentUser.imageUrl : 'assets/images/avatar-alt.png'"
            referrerpolicy="no-referrer">
        </ion-avatar>
        <ion-label>
          <ion-text class="h4">{{config.currentUser?.name}}</ion-text>
          <ion-text class="d-block" color="medium"><small>{{config.currentUser?.email}}</small></ion-text>
        </ion-label>
      </ion-item>
    </ion-card-header>
    <ion-card-content>
      <ion-label class="text-sm center text-center block">Many more features are coming soon...!</ion-label>
    </ion-card-content>
  </ion-card>

  <ion-card class="rounded-3xl">
    <ion-card-header class="flex justify-between ion-align-items-center">
      <ion-label>
        App Settings
      </ion-label>
      <ion-button color="primary" class="text-sm" shape="round" size="small" fill="solid" (click)="onSubmitSettings()">
        <span *ngIf="!savingSettings">Save</span>
        <ion-spinner *ngIf="savingSettings" name="dots"></ion-spinner>
      </ion-button>
    </ion-card-header>
    <ion-card-content>
      <form [formGroup]="settingsForm">
        <ion-list>
          <ion-item>
            <ion-label>Carry over each month balances</ion-label>
            <ion-toggle formControlName="addLastMonthBalance"></ion-toggle>
          </ion-item>
          <ion-item>
            <ion-label>Remember last Page</ion-label>
            <ion-toggle formControlName="rememberLastPage"></ion-toggle>
          </ion-item>
          <ion-item>
            <ion-label>Default Page</ion-label>
            <ion-select placeholder="Select One" interface="action-sheet" formControlName="defaultPage">
              <ion-select-option [value]="page" *ngFor="let page of allPages">{{page | titlecase}}</ion-select-option>
            </ion-select>
          </ion-item>
        </ion-list>
      </form>
    </ion-card-content>
  </ion-card>
  <ion-card class="rounded-3xl">
    <ion-card-header>
      <div class="flex justify-between ion-align-items-center">
        <div class="text-xl">
          <p class="p-0 m-0 -mb-2">Your Bank Accounts</p>
          <small class="text-gray-500 text-xs">Swipe left for options</small>
        </div>
        <ion-button color="primary" shape="round" size="small" [disabled]="!connectivity.isOnline"
          (click)="addAccountsPopup()">
          <ion-icon slot="icon-only" name="add"></ion-icon>
        </ion-button>
      </div>
    </ion-card-header>
    <ion-card-content>
      <ion-list>
        <ion-item-sliding *ngFor="let account of allAccounts">
          <ion-item button (click)="onChangeAccount(account.id)">
            <ion-icon size="large" [name]="'card-outline'" slot="start" color="primary"></ion-icon>
            <ion-label>{{account.name}}</ion-label>
            <ion-icon *ngIf="account.id === currentAccount" size="small" color="success" [name]="'checkmark-circle'"
              slot="end"></ion-icon>
          </ion-item>
          <ion-item-options side="end">
            <ion-item-option color="danger" (click)="onDeleteAccount(account)">Delete</ion-item-option>
            <ion-item-option color="warning" (click)="onEditAccount(account)">Edit</ion-item-option>
          </ion-item-options>
        </ion-item-sliding>
      </ion-list>
    </ion-card-content>
  </ion-card>
  <ion-card class="rounded-3xl">
    <ion-card-header>
      <ion-label>
        Actions
      </ion-label>
    </ion-card-header>
    <ion-card-content>
      <ion-button [hidden]="true" color="warning" expand="block" (click)="confirmClear()">Clear History</ion-button>
      <ion-button color="danger" expand="block" class="ion-margin-top" (click)="onLogout()">Logout</ion-button>
    </ion-card-content>
  </ion-card>
</ion-content>